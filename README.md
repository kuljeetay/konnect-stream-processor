# Konnect Stream Processor Consumer with OpenSearch Integration

This repository implements a Python based Kafka consumer that ingests events from a Kafka topic and indexes them into OpenSearch. It is built to handle Change Data Capture (CDC) events generated by Debezium.

## Table of Contents


- [Features](#features)
- [Project Structure](#project-structure)
- [Prerequisites](#prerequisites)
- [Setup](#setup)
  - [1. Clone the Repository](#1-clone-the-repository)
  - [2. Build and Run with Docker Compose](#2-build-and-run-with-docker-compose)
- [Configuration](#configuration)
- [Running the Application](#running-the-application)

## Features

- Consumes CDC events from a Kafka topic.
- Indexes events into OpenSearch.
- Supports environment configuration for Kafka and OpenSearch.
- Built with Python and Docker for easy deployment.

## Project Structure
    konnect-stream-processor/
    ├── docker-compose.yaml
    ├── Dockerfile
    ├── src/
    │ ├── consumer/
    │ │ ├── main.py
    │ │ ├── kafka_consumer.py
    │ │ ├── events_handler.py
    │ │ ├── opensearch_client.py
    │ │ ├── config.py
    │ │ └── utils.py
    ├── requirements.txt
    └── README.md

## Prerequisites

- Docker and Docker Compose installed.
- Kafka, Zookeeper, Opensearch images (provided by Docker Compose).

## Setup

### 1. Clone the Repository.
```sh
git clone https://github.com/kuljeetay/konnect-stream-processor.git
cd konnect-stream-processor
```


### 2. Build and Run with Docker Compose.

To build and start the services defined in docker-compose.yml, run:
```sh
docker-compose up -d
```

## Configuration

Configuration for Kafka and OpenSearch is managed through environment variables in the docker-compose.yml file:

    KAFKA_TOPIC: The Kafka topic to consume from (default: cdc-events).
    KAFKA_HOST: The Kafka broker address (default: kafka:29092).
    OPENSEARCH_HOST: The OpenSearch host (default: opensearch).
    OPENSEARCH_PORT: The OpenSearch port (default: 9200).

These can be adjusted as needed.

## Running the Application

After starting the services with Docker Compose, the *konnect-stream-processor consumer* will automatically start consuming events from the specified Kafka topic and index them into OpenSearch. Application logs can be seen using docker logs -f konnect-stream-processor-container